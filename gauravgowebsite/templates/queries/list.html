{% extends 'admin_base.html' %}
{% load static %}
{% block title %}Queries - Manage{% endblock %}

{% block main %}
<style>
  /* Main Card */
  .card.shadow {
    border-radius: 16px;
    border: none;
    box-shadow: 0 6px 18px rgba(0,0,0,0.08) !important;
    transition: all 0.3s ease;
  }
  .card.shadow:hover {
    box-shadow: 0 10px 25px rgba(0,0,0,0.12) !important;
  }

  /* Header Section */
  .card-body h5 {
    font-weight: 700;
    background: linear-gradient(90deg, #007bff, #6610f2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* Tabs Styling */
  .nav-tabs {
    border-bottom: none;
    background: #f1f3f6;
    border-radius: 12px;
    padding: 6px;
  }

  .nav-tabs .nav-link {
    border: none;
    color: #555;
    border-radius: 10px;
    padding: 10px 18px;
    transition: 0.3s ease;
    font-weight: 500;
  }

  .nav-tabs .nav-link.active {
    background: linear-gradient(90deg, #007bff, #6f42c1);
    color: #fff !important;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
  }

  .nav-tabs .nav-link:hover {
    background: rgba(0,123,255,0.1);
    color: #007bff;
  }

  /* Badge Styling */
  .nav-tabs .badge {
    font-size: 0.8rem;
    padding: 4px 8px;
    border-radius: 10px;
  }

  /* Tab Content */
  .tab-content {
    background: #ffffff;
    border-radius: 14px;
    padding: 20px;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
    animation: fadeIn 0.4s ease-in-out;
  }

  /* Smooth Fade Animation */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Refresh Button */
  .btn-outline-secondary {
    border-radius: 10px;
    font-weight: 500;
    transition: 0.3s;
  }

  .btn-outline-secondary:hover {
    background: #6c757d;
    color: #fff;
  }

  /* Mobile Adjustments */
  @media (max-width: 768px) {
    .nav-tabs {
      flex-wrap: wrap;
      justify-content: center;
    }
    .nav-tabs .nav-link {
      margin-bottom: 6px;
    }
  }
</style>

<div class="card shadow m-2">
  <div class="card-body">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 class="mb-0">Queries</h5>
      <div>
        <a href="{% url 'queries:all' %}" class="btn btn-sm btn-outline-secondary">Refresh</a>
      </div>
    </div>

    <!-- Tabs for Unread / Read / All -->
    <ul class="nav nav-tabs" id="queriesTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="unread-tab" data-bs-toggle="tab" data-bs-target="#unread" type="button" role="tab" aria-controls="unread" aria-selected="true">
          Unread <span class="badge bg-danger ms-1">{{ unread_list|length }}</span>
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="read-tab" data-bs-toggle="tab" data-bs-target="#read" type="button" role="tab" aria-controls="read" aria-selected="false">
          Read <span class="badge bg-secondary ms-1">{{ read_list|length }}</span>
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="all-tab" data-bs-toggle="tab" data-bs-target="#all" type="button" role="tab" aria-controls="all" aria-selected="false">
          All <span class="badge bg-info ms-1">{{ all_list|length }}</span>
        </button>
      </li>
    </ul>

    <div class="tab-content mt-3" id="queriesTabContent">
      <!-- Unread -->
      <div class="tab-pane fade show active" id="unread" role="tabpanel" aria-labelledby="unread-tab">
        {% include "queries/_queries_table.html" with queries=unread_list empty_message="No unread queries." %}
      </div>

      <!-- Read -->
      <div class="tab-pane fade" id="read" role="tabpanel" aria-labelledby="read-tab">
        {% include "queries/_queries_table.html" with queries=read_list empty_message="No read queries." %}
      </div>

      <!-- All -->
      <div class="tab-pane fade" id="all" role="tabpanel" aria-labelledby="all-tab">
        {% include "queries/_queries_table.html" with queries=all_list empty_message="No queries found." %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
